import{f as C,r as p,g as R,h as w,i as T,j as q,o as f,c as _,a as u,u as t,F as h,d as g,t as k,k as E,v as $,l as A,b as y,_ as B,m as D,n as S,q as V,w as L}from"./entry.3de49fd3.js";import{u as N,q as O}from"./query.a1141fd4.js";import"./preview.62f88518.js";const P={class:"app-header"},F={key:0,class:"pl-2"},M={key:1,class:"pl-2"},U=["disabled"],j=["disabled"],I={class:"float-right pr-2"},z={class:"app-content"},G=C({__name:"pdfEmbed",props:{url:{}},setup(m){const a=m,d=p(!1),e=p(1),n=p(""),l=p(),r=R(()=>{var s;return((s=l.value)==null?void 0:s.pageCount)||1}),c=p(!1);w(()=>a.url,(s,o)=>{n.value=s},{immediate:!0}),w(()=>c.value,(s,o)=>{e.value=s?0:1});const i=(s,o)=>{s(prompt(o?"Enter password again":"Enter password"))},b=()=>{d.value=!1};return T(()=>{l.value=null}),(s,o)=>{const x=q("vue-pdf-embed");return f(),_(h,null,[u("div",P,[t(d)?(f(),_(h,{key:0},[g(" Loading... ")],64)):(f(),_(h,{key:1},[t(c)?(f(),_("span",F,k(t(r))+" page(s) ",1)):(f(),_("span",M,[u("button",{disabled:t(e)<=1,onClick:o[0]||(o[0]=v=>e.value--)},"❮",8,U),g(" "+k(t(e))+" / "+k(t(r))+" ",1),u("button",{disabled:t(e)>=t(r),onClick:o[1]||(o[1]=v=>e.value++)},"❯",8,j)])),u("label",I,[E(u("input",{"onUpdate:modelValue":o[2]||(o[2]=v=>A(c)?c.value=v:null),type:"checkbox"},null,512),[[$,t(c)]]),g(" Show all pages ")])],64))]),u("div",z,[y(x,{ref_key:"pdfRef",ref:l,source:t(n),page:t(e),onPasswordRequested:i,onRendered:b},null,8,["source","page"])])],64)}}});const H=B(G,[["__scopeId","data-v-2a4f6ba0"]]),J=C({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(m,{slots:a,attrs:d}){const e=p(!1);return D(()=>{e.value=!0}),n=>{var i;if(e.value)return(i=a.default)==null?void 0:i.call(a);const l=a.fallback||a.placeholder;if(l)return l();const r=n.fallback||n.placeholder||"",c=n.fallbackTag||n.placeholderTag||"span";return _(c,d,r)}}}),X={__name:"[id]",async setup(m){let a,d;const e=p(null),{path:n}=S(),{data:l}=([a,d]=V(()=>N(`content-${n}`,()=>O().where({_path:n}).findOne())),a=await a,d(),a);return e.value=`/uploads/books/${l.value.name}.pdf`,(r,c)=>{const i=H,b=J;return f(),_("main",null,[u("div",null,[y(b,{"fallback-tag":"span",fallback:"Loading Component"},{default:L(()=>[y(i,{url:t(e)},null,8,["url"])]),_:1})])])}}};export{X as default};
